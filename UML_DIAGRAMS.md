# UML Diagrams â€“ SIFCO Stock Management System

**Version:** 3.0  
**Date:** 2025-11-02  
**Phase:** 3 (Slice 3 â€“ Bon d'EntrÃ©e Implementation)  
**Database:** MySQL 8.0.44 | 27 tables

---

## ğŸ“Š Table of Contents

1. [Use Case Diagram](#use-case-diagram)
2. [Class Diagram](#class-diagram)
3. [Entity Relationship Diagram (ERD)](#entity-relationship-diagram-erd)
4. [Sequence Diagrams](#sequence-diagrams)
5. [State Diagrams](#state-diagrams)

---

## 1. Use Case Diagram

### System Actors

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SIFCO Stock Management System                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Actors:
  ğŸ‘¤ Magasinier (Warehouse Clerk)
  ğŸ‘¤ Responsable Magasin (Warehouse Manager)
  ğŸ‘¤ Comptable (Accountant)
  ğŸ‘¤ Directeur Production (Production Manager)
  ğŸ¤– System (Automated Processes)
```

### Use Cases by Actor

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Magasinier (Warehouse Clerk)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ UC01: Enregistrer Bon de RÃ©ception (Record Receipt)                 â”‚
â”‚ UC02: CrÃ©er Bon d'EntrÃ©e (Create Entry Document)                    â”‚
â”‚ UC03: GÃ©nÃ©rer EAN-13 pour Bobines (Generate Roll Barcodes)          â”‚
â”‚ UC04: Ã‰mettre Bon de Sortie (Issue Materials)                       â”‚
â”‚ UC05: TransfÃ©rer Stock entre Magasins (Transfer Between Warehouses) â”‚
â”‚ UC06: Enregistrer Bon de RÃ©intÃ©gration (Record Returns)             â”‚
â”‚ UC07: Faire Ajustement Manuel (Manual Stock Adjustment)             â”‚
â”‚ UC08: Consulter Stock Disponible (Check Available Stock)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Responsable Magasin (Warehouse Manager)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ UC09: Valider Bon d'EntrÃ©e (Validate Entry)                         â”‚
â”‚ UC10: Valider Bon de Sortie (Validate Issue)                        â”‚
â”‚ UC11: Consulter Mouvements de Stock (View Stock Movements)          â”‚
â”‚ UC12: GÃ©rer Avis de Rupture (Manage Low-Stock Alerts)               â”‚
â”‚ UC13: GÃ©rer Produits et CatÃ©gories (Manage Products & Categories)   â”‚
â”‚ UC14: GÃ©rer Fournisseurs (Manage Suppliers)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Comptable (Accountant)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ UC15: Consulter Valorisation Stock (View Stock Valuation)           â”‚
â”‚ UC16: GÃ©nÃ©rer Rapport CUMP (Generate Weighted Average Report)       â”‚
â”‚ UC17: Exporter DonnÃ©es Comptables (Export Accounting Data)          â”‚
â”‚ UC18: Consulter Historique Prix (View Price History)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Directeur Production (Production Manager)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ UC19: Consulter DisponibilitÃ© MatiÃ¨res (Check Material Availability)â”‚
â”‚ UC20: Voir Dashboard Production (View Production Dashboard)         â”‚
â”‚ UC21: Analyser Consommation (Analyze Consumption)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      System (Automated Processes)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ UC22: Calculer CUMP (Calculate Weighted Average Cost)               â”‚
â”‚ UC23: GÃ©nÃ©rer Avis de Rupture Auto (Auto-Generate Low-Stock Alerts) â”‚
â”‚ UC24: CrÃ©er Mouvements de Stock (Create Stock Movements)            â”‚
â”‚ UC25: Mettre Ã  Jour QuantitÃ©s (Update Stock Quantities)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Use Case Relationships

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Enregistrer Bon RÃ©ception   â”‚
                    â”‚         (UC01)                â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚ <<include>>
                                â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    CrÃ©er Bon d'EntrÃ©e          â”‚
                    â”‚         (UC02)                 â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚ <<include>>
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  GÃ©nÃ©rer EAN-13      â”‚  â”‚  Calculer CUMP       â”‚
        â”‚    (UC03)            â”‚  â”‚    (UC22)            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚ <<include>>
                                              â–¼
                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                  â”‚ CrÃ©er Mouvements     â”‚
                                  â”‚   Stock (UC24)       â”‚
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚ <<include>>
                                              â–¼
                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                  â”‚ Mettre Ã  Jour        â”‚
                                  â”‚ QuantitÃ©s (UC25)     â”‚
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Class Diagram

### Core Domain Model

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Domain Model Classes                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Product         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - id: bigint        â”‚
â”‚ - code: string(20)  â”‚
â”‚ - name: string      â”‚
â”‚ - type: enum        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”
â”‚ - description: text â”‚        â”‚
â”‚ - grammage: int     â”‚        â”‚ 1..*
â”‚ - laize: int        â”‚        â”‚
â”‚ - flute: string     â”‚   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ - type_papier: str  â”‚   â”‚  ProductCategory â”‚
â”‚ - extra_attrs: json â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - unit_id: FK       â”‚   â”‚ - product_id: FK â”‚
â”‚ - is_roll: bool     â”‚   â”‚ - category_id:FK â”‚
â”‚ - is_active: bool   â”‚   â”‚ - is_primary:boolâ”‚
â”‚ - min_stock: dec    â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ - safety_stock: dec â”‚        â”‚
â”‚ - avg_cost: decimal â”‚        â”‚ 1..*
â”‚ - created_at        â”‚        â”‚
â”‚ - updated_at        â”‚        â–¼
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                  â”‚   Category     â”‚
       â”‚ 1                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚                  â”‚ - id: bigint   â”‚
       â”‚                  â”‚ - code: str(10)â”‚
       â”‚                  â”‚ - name: string â”‚
       â”‚                  â”‚ - description  â”‚
       â”‚                  â”‚ - is_active    â”‚
       â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1
       â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚     Unit       â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ - id: bigint   â”‚
  â”‚ - name: string â”‚
  â”‚ - symbol: str  â”‚
  â”‚ - type: string â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         1          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Warehouse       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   StockQuantity     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - id: bigint        â”‚                     â”‚ - id: bigint        â”‚
â”‚ - code: string(10)  â”‚                     â”‚ - product_id: FK    â”‚
â”‚ - name: string      â”‚                     â”‚ - warehouse_id: FK  â”‚
â”‚ - location: string  â”‚                     â”‚ - quantity: decimal â”‚
â”‚ - is_active: bool   â”‚                     â”‚ - cump_snapshot:dec â”‚
â”‚ - created_at        â”‚                     â”‚ - last_movement_id  â”‚
â”‚ - updated_at        â”‚                     â”‚ - updated_at        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
                                                   â”‚ *
                                                   â”‚
                                                   â”‚ 1
                                            â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                            â”‚   StockMovement     â”‚
                                            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                            â”‚ - id: bigint        â”‚
                                            â”‚ - movement_number   â”‚
                                            â”‚ - product_id: FK    â”‚
                                            â”‚ - qty_moved: dec    â”‚
                                            â”‚ - qty_before: dec   â”‚
                                            â”‚ - qty_after: dec    â”‚
                                            â”‚ - cump_at_mvt: dec  â”‚
                                            â”‚ - unit_cost: dec    â”‚
                                            â”‚ - warehouse_from:FK â”‚
                                            â”‚ - warehouse_to: FK  â”‚
                                            â”‚ - movement_type:enumâ”‚
                                            â”‚ - reference_doc     â”‚
                                            â”‚ - notes: text       â”‚
                                            â”‚ - created_by: FK    â”‚
                                            â”‚ - created_at        â”‚
                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         1          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Product         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚       Roll          â”‚
â”‚   (is_roll=true)    â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚ - id: bigint        â”‚
                                            â”‚ - product_id: FK    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ - warehouse_id: FK  â”‚
        â”‚                                   â”‚ - ean_13: str(13)   â”‚
        â”‚ 1                                 â”‚ - batch_number: str â”‚
        â–¼                                   â”‚ - received_date     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚ - status: enum      â”‚
â”‚     Warehouse       â”‚                     â”‚ - notes: text       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚ - created_at        â”‚
                                            â”‚ - updated_at        â”‚
                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Supplier        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - id: bigint        â”‚
â”‚ - code: string(10)  â”‚
â”‚ - name: string      â”‚
â”‚ - contact: string   â”‚
â”‚ - email: string     â”‚
â”‚ - phone: string     â”‚
â”‚ - address: text     â”‚
â”‚ - payment_terms:str â”‚
â”‚ - is_active: bool   â”‚
â”‚ - created_at        â”‚
â”‚ - updated_at        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Workflow Document Classes (Bon System)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Workflow Document Classes                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   BonReception      â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚ - id: bigint        â”‚
                    â”‚ - bon_number: str   â”‚
                    â”‚ - supplier_id: FK   â”‚
                    â”‚ - reception_date    â”‚
                    â”‚ - delivery_note:str â”‚
                    â”‚ - notes: text       â”‚
                    â”‚ - status: enum      â”‚
                    â”‚ - received_by: FK   â”‚
                    â”‚ - validated_by: FK  â”‚
                    â”‚ - validated_at      â”‚
                    â”‚ - created_at        â”‚
                    â”‚ - updated_at        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ 1
                           â”‚ <<generates>>
                           â”‚
                           â–¼ 1..*
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   BonEntree         â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚ - id: bigint        â”‚
                    â”‚ - bon_number: str   â”‚
                    â”‚ - warehouse_id: FK  â”‚
                    â”‚ - reception_id: FK  â”‚
                    â”‚ - entry_date: date  â”‚
                    â”‚ - notes: text       â”‚
                    â”‚ - status: enum      â”‚
                    â”‚ - entered_by: FK    â”‚
                    â”‚ - validated_by: FK  â”‚
                    â”‚ - validated_at      â”‚
                    â”‚ - created_at        â”‚
                    â”‚ - updated_at        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ 1
                           â”‚
                           â”‚
                           â–¼ *
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  BonEntreeItem      â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚ - id: bigint        â”‚
                    â”‚ - bon_entree_id: FK â”‚
                    â”‚ - product_id: FK    â”‚
                    â”‚ - quantity: decimal â”‚
                    â”‚ - unit_price: dec   â”‚
                    â”‚ - total_price: dec  â”‚
                    â”‚ - roll_ids: json    â”‚
                    â”‚ - notes: text       â”‚
                    â”‚ - created_at        â”‚
                    â”‚ - updated_at        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         1          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     BonSortie       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   BonSortieItem     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - id: bigint        â”‚                     â”‚ - id: bigint        â”‚
â”‚ - bon_number: str   â”‚                     â”‚ - bon_sortie_id: FK â”‚
â”‚ - warehouse_id: FK  â”‚                     â”‚ - product_id: FK    â”‚
â”‚ - destination: str  â”‚                     â”‚ - quantity: decimal â”‚
â”‚ - issue_date: date  â”‚                     â”‚ - cump_value: dec   â”‚
â”‚ - purpose: string   â”‚                     â”‚ - roll_ids: json    â”‚
â”‚ - notes: text       â”‚                     â”‚ - notes: text       â”‚
â”‚ - status: enum      â”‚                     â”‚ - created_at        â”‚
â”‚ - issued_by: FK     â”‚                     â”‚ - updated_at        â”‚
â”‚ - validated_by: FK  â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ - validated_at      â”‚
â”‚ - created_at        â”‚
â”‚ - updated_at        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         1          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   BonTransfert      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  BonTransfertItem   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - id: bigint        â”‚                     â”‚ - id: bigint        â”‚
â”‚ - bon_number: str   â”‚                     â”‚ - bon_transfert_id  â”‚
â”‚ - warehouse_from:FK â”‚                     â”‚ - product_id: FK    â”‚
â”‚ - warehouse_to: FK  â”‚                     â”‚ - quantity: decimal â”‚
â”‚ - transfer_date     â”‚                     â”‚ - cump_value: dec   â”‚
â”‚ - notes: text       â”‚                     â”‚ - roll_ids: json    â”‚
â”‚ - status: enum      â”‚                     â”‚ - notes: text       â”‚
â”‚ - requested_by: FK  â”‚                     â”‚ - created_at        â”‚
â”‚ - validated_by: FK  â”‚                     â”‚ - updated_at        â”‚
â”‚ - validated_at      â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ - created_at        â”‚
â”‚ - updated_at        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         1          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BonReintegration    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚BonReintegrationItem â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - id: bigint        â”‚                     â”‚ - id: bigint        â”‚
â”‚ - bon_number: str   â”‚                     â”‚ - bon_reinteg_id:FK â”‚
â”‚ - warehouse_id: FK  â”‚                     â”‚ - product_id: FK    â”‚
â”‚ - return_date: date â”‚                     â”‚ - quantity: decimal â”‚
â”‚ - origin: string    â”‚                     â”‚ - original_cump:dec â”‚
â”‚ - reason: text      â”‚                     â”‚ - roll_ids: json    â”‚
â”‚ - notes: text       â”‚                     â”‚ - notes: text       â”‚
â”‚ - status: enum      â”‚                     â”‚ - created_at        â”‚
â”‚ - returned_by: FK   â”‚                     â”‚ - updated_at        â”‚
â”‚ - validated_by: FK  â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ - validated_at      â”‚
â”‚ - created_at        â”‚
â”‚ - updated_at        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Authentication & User Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       User          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - id: bigint        â”‚
â”‚ - name: string      â”‚
â”‚ - email: string     â”‚
â”‚ - password: hash    â”‚
â”‚ - role: enum        â”‚
â”‚ - is_active: bool   â”‚
â”‚ - created_at        â”‚
â”‚ - updated_at        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Entity Relationship Diagram (ERD)

### Complete Database Schema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       SIFCO Stock - ERD                              â”‚
â”‚                    27 Tables | MySQL 8.0.44                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


                    MASTER DATA LAYER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   units     â”‚       â”‚ categories  â”‚       â”‚  suppliers  â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ PK id       â”‚       â”‚ PK id       â”‚       â”‚ PK id       â”‚
    â”‚    name     â”‚       â”‚    code     â”‚       â”‚    code     â”‚
    â”‚    symbol   â”‚       â”‚    name     â”‚       â”‚    name     â”‚
    â”‚    type     â”‚       â”‚    desc     â”‚       â”‚    contact  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚    email    â”‚
                                                 â”‚    phone    â”‚
                                                 â”‚    address  â”‚
                                                 â”‚    payment  â”‚
                                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ warehouses  â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ PK id       â”‚
    â”‚    code     â”‚
    â”‚    name     â”‚
    â”‚    location â”‚
    â”‚    active   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


                    PRODUCT LAYER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              products                        â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ PK id                                        â”‚
    â”‚    code (unique)                             â”‚
    â”‚    name                                      â”‚
    â”‚    type (enum: papier_roll|consommable|fini) â”‚
    â”‚    description                               â”‚
    â”‚    grammage (int, nullable)                  â”‚
    â”‚    laize (int, nullable)                     â”‚
    â”‚    flute (string, nullable)                  â”‚
    â”‚    type_papier (string, nullable)            â”‚
    â”‚    extra_attributes (JSON, nullable)         â”‚
    â”‚ FK unit_id â†’ units.id                        â”‚
    â”‚    is_active (bool, default true)            â”‚
    â”‚    is_roll (bool, default false)             â”‚
    â”‚    min_stock (decimal)                       â”‚
    â”‚    safety_stock (decimal)                    â”‚
    â”‚    avg_cost (decimal, CUMP global)           â”‚
    â”‚    timestamps                                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ many-to-many
                      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         product_category (pivot)             â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ FK product_id â†’ products.id                  â”‚
    â”‚ FK category_id â†’ categories.id               â”‚
    â”‚    is_primary (bool)                         â”‚
    â”‚    timestamps                                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


                    INVENTORY LAYER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚          stock_quantities                    â”‚
    â”‚      (aggregated per product+warehouse)      â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ PK id                                        â”‚
    â”‚ FK product_id â†’ products.id                  â”‚
    â”‚ FK warehouse_id â†’ warehouses.id              â”‚
    â”‚    quantity (decimal)                        â”‚
    â”‚    cump_snapshot (decimal, per warehouse)    â”‚
    â”‚ FK last_movement_id â†’ stock_movements.id     â”‚
    â”‚    updated_at                                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â–²
                      â”‚ updates via
                      â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚          stock_movements                     â”‚
    â”‚         (complete audit trail)               â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ PK id                                        â”‚
    â”‚    movement_number (unique, auto)            â”‚
    â”‚ FK product_id â†’ products.id                  â”‚
    â”‚    quantity_moved (decimal, +/-)             â”‚
    â”‚    quantity_before (decimal)                 â”‚
    â”‚    quantity_after (decimal)                  â”‚
    â”‚    cump_at_movement (decimal, snapshot)      â”‚
    â”‚    unit_cost (decimal, from doc)             â”‚
    â”‚ FK warehouse_from_id â†’ warehouses.id (null)  â”‚
    â”‚ FK warehouse_to_id â†’ warehouses.id (null)    â”‚
    â”‚    movement_type (enum: entry|issue|...)     â”‚
    â”‚    reference_document (string: BON_ENT_...)  â”‚
    â”‚    notes (text)                              â”‚
    â”‚ FK created_by â†’ users.id                     â”‚
    â”‚    created_at                                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              rolls                           â”‚
    â”‚    (individual physical roll tracking)       â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ PK id                                        â”‚
    â”‚ FK product_id â†’ products.id (is_roll=true)   â”‚
    â”‚ FK warehouse_id â†’ warehouses.id              â”‚
    â”‚    ean_13 (string(13), unique)               â”‚
    â”‚    batch_number (string, nullable)           â”‚
    â”‚    received_date (date)                      â”‚
    â”‚    status (enum: in_stock|reserved|consumed) â”‚
    â”‚    notes (text, nullable)                    â”‚
    â”‚    timestamps                                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


                    WORKFLOW LAYER (BON SYSTEM)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚          bon_receptions                      â”‚
    â”‚       (supplier delivery documents)          â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ PK id                                        â”‚
    â”‚    bon_number (unique, auto: BON_REC_...)    â”‚
    â”‚ FK supplier_id â†’ suppliers.id                â”‚
    â”‚    reception_date (date)                     â”‚
    â”‚    delivery_note_number (string)             â”‚
    â”‚    notes (text)                              â”‚
    â”‚    status (enum: pending|validated|canceled) â”‚
    â”‚ FK received_by â†’ users.id                    â”‚
    â”‚ FK validated_by â†’ users.id (nullable)        â”‚
    â”‚    validated_at (timestamp)                  â”‚
    â”‚    timestamps                                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ generates
                      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚            bon_entrees                       â”‚
    â”‚         (warehouse entry documents)          â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ PK id                                        â”‚
    â”‚    bon_number (unique, auto: BON_ENT_...)    â”‚
    â”‚ FK warehouse_id â†’ warehouses.id              â”‚
    â”‚ FK reception_id â†’ bon_receptions.id (null)   â”‚
    â”‚    entry_date (date)                         â”‚
    â”‚    notes (text)                              â”‚
    â”‚    status (enum: pending|validated|canceled) â”‚
    â”‚ FK entered_by â†’ users.id                     â”‚
    â”‚ FK validated_by â†’ users.id (nullable)        â”‚
    â”‚    validated_at (timestamp)                  â”‚
    â”‚    timestamps                                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ has items
                      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚          bon_entree_items                    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ PK id                                        â”‚
    â”‚ FK bon_entree_id â†’ bon_entrees.id            â”‚
    â”‚ FK product_id â†’ products.id                  â”‚
    â”‚    quantity (decimal)                        â”‚
    â”‚    unit_price (decimal)                      â”‚
    â”‚    total_price (decimal, calculated)         â”‚
    â”‚    roll_ids (JSON, array of generated EANs)  â”‚
    â”‚    notes (text)                              â”‚
    â”‚    timestamps                                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚            bon_sorties                       â”‚
    â”‚       (issue to production documents)        â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ PK id                                        â”‚
    â”‚    bon_number (unique, auto: BON_SOR_...)    â”‚
    â”‚ FK warehouse_id â†’ warehouses.id              â”‚
    â”‚    destination (string: production line)     â”‚
    â”‚    issue_date (date)                         â”‚
    â”‚    purpose (string)                          â”‚
    â”‚    notes (text)                              â”‚
    â”‚    status (enum: pending|validated|canceled) â”‚
    â”‚ FK issued_by â†’ users.id                      â”‚
    â”‚ FK validated_by â†’ users.id (nullable)        â”‚
    â”‚    validated_at (timestamp)                  â”‚
    â”‚    timestamps                                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ has items
                      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚          bon_sortie_items                    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ PK id                                        â”‚
    â”‚ FK bon_sortie_id â†’ bon_sorties.id            â”‚
    â”‚ FK product_id â†’ products.id                  â”‚
    â”‚    quantity (decimal)                        â”‚
    â”‚    cump_value (decimal, from snapshot)       â”‚
    â”‚    roll_ids (JSON, consumed roll EANs)       â”‚
    â”‚    notes (text)                              â”‚
    â”‚    timestamps                                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚          bon_transferts                      â”‚
    â”‚    (inter-warehouse transfer documents)      â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ PK id                                        â”‚
    â”‚    bon_number (unique, auto: BON_TRF_...)    â”‚
    â”‚ FK warehouse_from_id â†’ warehouses.id         â”‚
    â”‚ FK warehouse_to_id â†’ warehouses.id           â”‚
    â”‚    transfer_date (date)                      â”‚
    â”‚    notes (text)                              â”‚
    â”‚    status (enum: pending|validated|canceled) â”‚
    â”‚ FK requested_by â†’ users.id                   â”‚
    â”‚ FK validated_by â†’ users.id (nullable)        â”‚
    â”‚    validated_at (timestamp)                  â”‚
    â”‚    timestamps                                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ has items
                      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚        bon_transfert_items                   â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ PK id                                        â”‚
    â”‚ FK bon_transfert_id â†’ bon_transferts.id      â”‚
    â”‚ FK product_id â†’ products.id                  â”‚
    â”‚    quantity (decimal)                        â”‚
    â”‚    cump_value (decimal, preserved)           â”‚
    â”‚    roll_ids (JSON, transferred roll EANs)    â”‚
    â”‚    notes (text)                              â”‚
    â”‚    timestamps                                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚        bon_reintegrations                    â”‚
    â”‚      (return from production documents)      â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ PK id                                        â”‚
    â”‚    bon_number (unique, auto: BON_REI_...)    â”‚
    â”‚ FK warehouse_id â†’ warehouses.id              â”‚
    â”‚    return_date (date)                        â”‚
    â”‚    origin (string: source of return)         â”‚
    â”‚    reason (text)                             â”‚
    â”‚    notes (text)                              â”‚
    â”‚    status (enum: pending|validated|canceled) â”‚
    â”‚ FK returned_by â†’ users.id                    â”‚
    â”‚ FK validated_by â†’ users.id (nullable)        â”‚
    â”‚    validated_at (timestamp)                  â”‚
    â”‚    timestamps                                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ has items
                      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚      bon_reintegration_items                 â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ PK id                                        â”‚
    â”‚ FK bon_reintegration_id â†’ bon_reinteg...id   â”‚
    â”‚ FK product_id â†’ products.id                  â”‚
    â”‚    quantity (decimal)                        â”‚
    â”‚    original_cump (decimal, at issue time)    â”‚
    â”‚    roll_ids (JSON, returned roll EANs)       â”‚
    â”‚    notes (text)                              â”‚
    â”‚    timestamps                                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


                    SYSTEM TABLES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              users                           â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ PK id                                        â”‚
    â”‚    name (string)                             â”‚
    â”‚    email (string, unique)                    â”‚
    â”‚    password (hash)                           â”‚
    â”‚    role (enum: admin|manager|clerk)          â”‚
    â”‚    is_active (bool)                          â”‚
    â”‚    timestamps                                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


    Laravel System Tables:
    - migrations
    - cache, cache_locks
    - jobs, job_batches, failed_jobs
    - sessions
    - password_reset_tokens
```

---

## 4. Sequence Diagrams

### 4.1 Bon d'EntrÃ©e Workflow (Entry Process)

```
Magasinier    System         BonReception   BonEntree    Roll    StockMovement   StockQuantity
    â”‚             â”‚                â”‚             â”‚         â”‚            â”‚              â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                â”‚             â”‚         â”‚            â”‚              â”‚
    â”‚ Create       â”‚                â”‚             â”‚         â”‚            â”‚              â”‚
    â”‚ Reception    â”‚                â”‚             â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚                â”‚             â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚             â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚ INSERT         â”‚             â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚ bon_receptions â”‚             â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚ (status=pending)            â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚                â”‚             â”‚         â”‚            â”‚              â”‚
    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                â”‚             â”‚         â”‚            â”‚              â”‚
    â”‚ BON_REC_001  â”‚                â”‚             â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚                â”‚             â”‚         â”‚            â”‚              â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                â”‚             â”‚         â”‚            â”‚              â”‚
    â”‚ Create Entry â”‚                â”‚             â”‚         â”‚            â”‚              â”‚
    â”‚ (validate)   â”‚                â”‚             â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚                â”‚             â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚         â”‚            â”‚              â”‚
    â”‚              â”‚ INSERT bon_entrees          â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚ (status=validated)          â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚                â”‚             â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚         â”‚            â”‚              â”‚
    â”‚              â”‚ INSERT bon_entree_items     â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚ (product_id, qty, price)    â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚                â”‚             â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚ â”‚ IF product.is_roll=true  â”‚â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚                â”‚             â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚              â”‚
    â”‚              â”‚ LOOP: Generate EAN-13 for each roll   â”‚            â”‚              â”‚
    â”‚              â”‚ INSERT rolls (ean_13, product_id,     â”‚            â”‚              â”‚
    â”‚              â”‚              warehouse_id, status)    â”‚            â”‚              â”‚
    â”‚              â”‚                â”‚             â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚            â”‚              â”‚
    â”‚              â”‚ roll_ids: [EAN1, EAN2, ...]â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚                â”‚             â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚ UPDATE bon_entree_items.roll_ids      â”‚            â”‚              â”‚
    â”‚              â”‚                â”‚             â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚ â”‚ Calculate CUMP           â”‚â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚ â”‚ new_cump = (old_qty *    â”‚â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚ â”‚   old_cump + new_qty *   â”‚â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚ â”‚   unit_price) /          â”‚â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚ â”‚   (old_qty + new_qty)    â”‚â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚                â”‚             â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚              â”‚
    â”‚              â”‚ INSERT stock_movements (type=entry,   â”‚            â”‚              â”‚
    â”‚              â”‚   qty_moved=+qty, cump_at_movement,   â”‚            â”‚              â”‚
    â”‚              â”‚   reference_document=BON_ENT_001)     â”‚            â”‚              â”‚
    â”‚              â”‚                â”‚             â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚              â”‚ UPSERT stock_quantities (qty +=,      â”‚            â”‚              â”‚
    â”‚              â”‚   cump_snapshot=new_cump,             â”‚            â”‚              â”‚
    â”‚              â”‚   last_movement_id)                   â”‚            â”‚              â”‚
    â”‚              â”‚                â”‚             â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚ UPDATE products.avg_cost = new_cump   â”‚            â”‚              â”‚
    â”‚              â”‚                â”‚             â”‚         â”‚            â”‚              â”‚
    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                â”‚             â”‚         â”‚            â”‚              â”‚
    â”‚ Success      â”‚                â”‚             â”‚         â”‚            â”‚              â”‚
    â”‚ BON_ENT_001  â”‚                â”‚             â”‚         â”‚            â”‚              â”‚
    â”‚              â”‚                â”‚             â”‚         â”‚            â”‚              â”‚
```

### 4.2 Bon de Sortie Workflow (Issue Process)

```
Magasinier    System      BonSortie   StockMovement   StockQuantity   Roll
    â”‚             â”‚            â”‚             â”‚              â”‚           â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚             â”‚              â”‚           â”‚
    â”‚ Create Issueâ”‚            â”‚             â”‚              â”‚           â”‚
    â”‚ (dest, qty) â”‚            â”‚             â”‚              â”‚           â”‚
    â”‚             â”‚            â”‚             â”‚              â”‚           â”‚
    â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚             â”‚              â”‚           â”‚
    â”‚             â”‚ INSERT     â”‚             â”‚              â”‚           â”‚
    â”‚             â”‚ bon_sortiesâ”‚             â”‚              â”‚           â”‚
    â”‚             â”‚            â”‚             â”‚              â”‚           â”‚
    â”‚             â”‚ INSERT bon_sortie_items â”‚              â”‚           â”‚
    â”‚             â”‚ (product, qty)          â”‚              â”‚           â”‚
    â”‚             â”‚            â”‚             â”‚              â”‚           â”‚
    â”‚             â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚              â”‚           â”‚
    â”‚             â”‚ â”‚ Check stock qty    â”‚  â”‚              â”‚           â”‚
    â”‚             â”‚ â”‚ IF qty < requested â”‚  â”‚              â”‚           â”‚
    â”‚             â”‚ â”‚   THROW error      â”‚  â”‚              â”‚           â”‚
    â”‚             â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚              â”‚           â”‚
    â”‚             â”‚            â”‚             â”‚              â”‚           â”‚
    â”‚             â”‚ GET current CUMP from   â”‚              â”‚           â”‚
    â”‚             â”‚ stock_quantities        â”‚              â”‚           â”‚
    â”‚             â”‚            â”‚             â”‚              â”‚           â”‚
    â”‚             â”‚ UPDATE bon_sortie_items.cump_value     â”‚           â”‚
    â”‚             â”‚            â”‚             â”‚              â”‚           â”‚
    â”‚             â”‚ IF product.is_roll=true â”‚              â”‚           â”‚
    â”‚             â”‚   SELECT rolls WHERE    â”‚              â”‚           â”‚
    â”‚             â”‚   status='in_stock' LIMIT qty          â”‚           â”‚
    â”‚             â”‚            â”‚             â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚             â”‚            â”‚             â”‚              â”‚ UPDATE    â”‚
    â”‚             â”‚            â”‚             â”‚              â”‚ status=   â”‚
    â”‚             â”‚            â”‚             â”‚              â”‚ 'consumed'â”‚
    â”‚             â”‚            â”‚             â”‚              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚             â”‚            â”‚             â”‚              â”‚           â”‚
    â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚              â”‚           â”‚
    â”‚             â”‚ INSERT stock_movements  â”‚              â”‚           â”‚
    â”‚             â”‚ (type=issue, qty_moved=-qty,           â”‚           â”‚
    â”‚             â”‚  cump_at_movement, reference)          â”‚           â”‚
    â”‚             â”‚            â”‚             â”‚              â”‚           â”‚
    â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚             â”‚
    â”‚             â”‚ UPDATE stock_quantities â”‚              â”‚           â”‚
    â”‚             â”‚ (qty -= issued_qty)     â”‚              â”‚           â”‚
    â”‚             â”‚            â”‚             â”‚              â”‚           â”‚
    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚            â”‚             â”‚              â”‚           â”‚
    â”‚ Success     â”‚            â”‚             â”‚              â”‚           â”‚
    â”‚ BON_SOR_001 â”‚            â”‚             â”‚              â”‚           â”‚
    â”‚             â”‚            â”‚             â”‚              â”‚           â”‚
```

### 4.3 Low Stock Alert Generation (Automated)

```
System Timer    StockQuantity    Product    LowStockAlert    Manager
    â”‚                 â”‚             â”‚              â”‚            â”‚
    â”‚ CRON Job        â”‚             â”‚              â”‚            â”‚
    â”‚ (daily 8am)     â”‚             â”‚              â”‚            â”‚
    â”‚                 â”‚             â”‚              â”‚            â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚             â”‚              â”‚            â”‚
    â”‚ SELECT *        â”‚             â”‚              â”‚            â”‚
    â”‚ JOIN products   â”‚             â”‚              â”‚            â”‚
    â”‚                 â”‚             â”‚              â”‚            â”‚
    â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚              â”‚            â”‚
    â”‚                 â”‚ WHERE       â”‚              â”‚            â”‚
    â”‚                 â”‚ qty <=      â”‚              â”‚            â”‚
    â”‚                 â”‚ min_stock   â”‚              â”‚            â”‚
    â”‚                 â”‚             â”‚              â”‚            â”‚
    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚            â”‚
    â”‚ [product_id, warehouse_id, qty, min_stock]   â”‚            â”‚
    â”‚                 â”‚             â”‚              â”‚            â”‚
    â”‚ LOOP each low   â”‚             â”‚              â”‚            â”‚
    â”‚ stock item      â”‚             â”‚              â”‚            â”‚
    â”‚                 â”‚             â”‚              â”‚            â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚
    â”‚ INSERT low_stock_alerts                      â”‚            â”‚
    â”‚ (product_id, warehouse_id, qty, threshold,   â”‚            â”‚
    â”‚  severity, status=active)                    â”‚            â”‚
    â”‚                 â”‚             â”‚              â”‚            â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚ Send notification (email/Filament notif)     â”‚            â”‚
    â”‚                 â”‚             â”‚              â”‚            â”‚
```

---

## 5. State Diagrams

### 5.1 Bon Document Lifecycle

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          State Diagram: Bon Document (All Types)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  [START]  â”‚
                    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ Create document
                          â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”‚  PENDING  â”‚â—„â”€â”€â”€â”€â”€â”€â”
            â”‚       â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â”‚
            â”‚             â”‚              â”‚
            â”‚ Cancel      â”‚ Validate     â”‚ Reject validation
            â”‚             â”‚              â”‚
            â”‚             â–¼              â”‚
            â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
            â”‚       â”‚ VALIDATED â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚       â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
            â”‚             â”‚
            â”‚             â”‚ Process stock
            â”‚             â”‚ movements
            â”‚             â”‚
            â”‚             â–¼
            â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚       â”‚ COMPLETED â”‚
            â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚
            â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ CANCELLED â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 Roll Status Lifecycle

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              State Diagram: Roll Status                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  [START]  â”‚
                    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ Generate EAN-13
                          â”‚ on Bon d'EntrÃ©e
                          â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”‚  IN_STOCK  â”‚â—„â”€â”€â”€â”€â”€â”€â”
            â”‚       â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜       â”‚
            â”‚             â”‚              â”‚
            â”‚             â”‚ Reserve      â”‚ Unreserve
            â”‚             â”‚              â”‚
            â”‚             â–¼              â”‚
            â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
            â”‚       â”‚  RESERVED  â”‚â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚       â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
            â”‚             â”‚
            â”‚             â”‚ Issue via
            â”‚             â”‚ Bon de Sortie
            â”‚             â”‚
            â”‚             â–¼
            â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚       â”‚  CONSUMED  â”‚
            â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ Damage/Loss
            â”‚
            â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  DAMAGED   â”‚
      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ Archive after
            â”‚ investigation
            â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  ARCHIVED  â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 Stock Movement Type Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         State Diagram: Movement Type Transitions                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                 Stock = 0
                    â”‚
                    â”‚ ENTRY (Bon d'EntrÃ©e)
                    â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   Stock > 0   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚           â”‚                   â”‚
        â”‚ ISSUE     â”‚ TRANSFER          â”‚ REINTEGRATION
        â”‚ (Bon de   â”‚ (Bon de           â”‚ (Bon de
        â”‚  Sortie)  â”‚  Transfert)       â”‚  RÃ©intÃ©gration)
        â”‚           â”‚                   â”‚
        â–¼           â–¼                   â–¼
    Stock -= qty  Warehouse A -= qty  Stock += qty
                  Warehouse B += qty  (restore CUMP)
                  (preserve CUMP)
```

---

## ğŸ“ˆ Summary Statistics

### Current Implementation (Phase 3)

- **Total Tables**: 27
- **Master Data Tables**: 5 (products, categories, units, suppliers, warehouses)
- **Inventory Tables**: 3 (stock_quantities, stock_movements, rolls)
- **Workflow Tables**: 12 (4 bon types Ã— 3 tables each)
- **System Tables**: 7 (Laravel + auth)

### Filament Resources Created

- âœ… ProductResource (with is_roll flag)
- âœ… CategoryResource
- âœ… SupplierResource
- âœ… WarehouseResource
- âœ… UnitResource
- âœ… RollResource (filtered to is_roll products)
- âœ… UserResource
- â³ BonReceptionResource (next)
- â³ BonEntreeResource (next)
- â³ BonSortieResource (next)
- â³ BonTransfertResource (next)
- â³ BonReintegrationResource (next)

### Key Relationships

- **Product â†” Category**: Many-to-Many via `product_category`
- **Product â†’ Unit**: Many-to-One
- **StockQuantity**: Composite (Product + Warehouse)
- **Roll â†’ Product**: Many-to-One (filtered by is_roll=true)
- **StockMovement**: Audit trail for all inventory changes
- **Bon Documents**: Parent-child with line items

---

## ğŸ”„ Next Phase: Slice 3 Implementation

Focus on implementing the complete Bon d'EntrÃ©e workflow:

1. Create BonReception and BonEntree Filament resources
2. Implement EAN-13 generation for rolls
3. Implement CUMP calculation logic
4. Create stock_movements automatically on validation
5. Update stock_quantities after each entry
6. Test end-to-end workflow with real data

---

**Document maintained by:** AI Assistant  
**Last updated:** 2025-11-02  
**Status:** Living document - updated with each phase
